"use strict";

function _toConsumableArray(arr) {
  if (Array.isArray(arr)) {
    return Array.from(arr);
  }
  return Array.from(arr);
}

var playing = true;
var timer = function () {
  return setInterval(function () {
    var counter = document.getElementById("counter");
    var currentValue = parseInt(counter.innerText);
    counter.innerText = currentValue + 1;
  }, 1000);
};

var interval = timer();
var minusButton = document.getElementById("minus");
var plusButton = document.getElementById("plus");
var heartButton = document.getElementById("heart");
var pauseButton = document.getElementById("pause");
var commentForm = document.getElementsByTagName("form")[0];

minusButton.addEventListener("click", function () {
  var counter = document.getElementById("counter");
  var currentValue = parseInt(counter.innerText);
  counter.innerText = currentValue - 1;
});

plusButton.addEventListener("click", function () {
  var counter = document.getElementById("counter");
  var currentValue = parseInt(counter.innerText);
  counter.innerText = currentValue + 1;
});

heartButton.addEventListener("click", function () {
  var counter = document.getElementById("counter");
  var currentValue = parseInt(counter.innerText);
  var likesList = document.querySelector(".likes");
  
  var existingLike = [].concat(_toConsumableArray(likesList.children))
    .find(function (item) {
      return parseInt(item.dataset.num) === currentValue;
    });

  if (existingLike) {
    var likeCount = parseInt(existingLike.children[0].innerText);
    existingLike.innerHTML = currentValue + " has been liked <span>" + (likeCount + 1) + "</span> times";
  } else {
    var newLike = document.createElement("li");
    newLike.setAttribute("data-num", currentValue);
    newLike.innerHTML = currentValue + " has been liked <span>1</span> time";
    likesList.appendChild(newLike);
  }
});

pauseButton.addEventListener("click", function () {
  if (playing) {
    playing = false;
    clearInterval(interval);
    this.innerText = "resume";
  } else {
    playing = true;
    interval = timer();
    this.innerText = "pause";
  }

  var buttons = [].concat(_toConsumableArray(document.getElementsByTagName("button")));
  buttons.forEach(function (button) {
    if (button.id !== "pause") {
      button.disabled = !playing;
    }
  });
});

commentForm.addEventListener("submit", function (event) {
  event.preventDefault();
  var input = this.children[0];
  var commentText = input.value;
  input.value = "";

  var commentsSection = document.querySelector(".comments");
  var newComment = document.createElement("p");
  newComment.innerText = commentText;
  commentsSection.appendChild(newComment);
});
